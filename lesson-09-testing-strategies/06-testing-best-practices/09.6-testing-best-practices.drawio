<mxfile host="app.diagrams.net" modified="2024-01-15T10:00:00.000Z" agent="Claude" version="22.1.0">
  <diagram name="Testing Best Practices" id="testing-best-practices">
    <mxGraphModel dx="1400" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="1">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Testing Best Practices for Insurance Systems" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#333333;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="500" height="40" as="geometry" />
        </mxCell>

        <!-- Insurance Test Scenarios Section -->
        <mxCell id="scenarios-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1565C0;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="640" height="360" as="geometry" />
        </mxCell>
        <mxCell id="scenarios-title" value="Insurance-Specific Test Scenarios" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=14;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="50" y="85" width="280" height="25" as="geometry" />
        </mxCell>

        <!-- Quote Service -->
        <mxCell id="quote-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="55" y="120" width="300" height="140" as="geometry" />
        </mxCell>
        <mxCell id="quote-title" value="Quote Service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=12;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="55" y="125" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="quote-tests" value="• Premium calculation accuracy&#xa;• Discount/loading application order&#xa;• Tax calculation by region&#xa;• Quote expiration handling&#xa;• Product eligibility validation&#xa;• Multiple coverage combinations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="65" y="148" width="280" height="100" as="geometry" />
        </mxCell>

        <!-- Policy Service -->
        <mxCell id="policy-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="365" y="120" width="300" height="140" as="geometry" />
        </mxCell>
        <mxCell id="policy-title" value="Policy Service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=12;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="365" y="125" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="policy-tests" value="• Policy status transitions (state machine)&#xa;• Endorsement premium adjustments&#xa;• Pro-rata refund calculations&#xa;• Renewal premium recalculation&#xa;• Grace period handling&#xa;• Reinstatement eligibility" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="375" y="148" width="280" height="100" as="geometry" />
        </mxCell>

        <!-- Claims Service -->
        <mxCell id="claims-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="55" y="270" width="300" height="160" as="geometry" />
        </mxCell>
        <mxCell id="claims-title" value="Claims Service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=12;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="55" y="275" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="claims-tests" value="• Coverage verification&#xa;• Deductible application&#xa;• Claim limit checking (per occurrence, aggregate)&#xa;• Waiting period validation&#xa;• Pre-existing condition exclusion&#xa;• Fraud indicator detection&#xa;• Settlement calculations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="65" y="298" width="280" height="120" as="geometry" />
        </mxCell>

        <!-- Billing Service -->
        <mxCell id="billing-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#BBDEFB;strokeColor=#1976D2;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="365" y="270" width="300" height="160" as="geometry" />
        </mxCell>
        <mxCell id="billing-title" value="Billing Service" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=12;fontColor=#1565C0;" vertex="1" parent="1">
          <mxGeometry x="365" y="275" width="300" height="20" as="geometry" />
        </mxCell>
        <mxCell id="billing-tests" value="• Payment schedule generation&#xa;• Installment calculations&#xa;• Commission calculation&#xa;• Clawback processing&#xa;• Failed payment retry logic&#xa;• Refund processing&#xa;• Reconciliation tests" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="375" y="298" width="280" height="120" as="geometry" />
        </mxCell>

        <!-- Coverage Guidelines Section -->
        <mxCell id="coverage-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="80" width="340" height="200" as="geometry" />
        </mxCell>
        <mxCell id="coverage-title" value="Test Coverage Guidelines" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=14;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="710" y="85" width="200" height="25" as="geometry" />
        </mxCell>

        <!-- Coverage Table -->
        <mxCell id="coverage-header" value="Component" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="715" y="115" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="coverage-header2" value="Min %" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="835" y="115" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="coverage-header3" value="Focus Areas" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#A5D6A7;strokeColor=#2E7D32;fontStyle=1;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="885" y="115" width="140" height="25" as="geometry" />
        </mxCell>

        <mxCell id="row1-1" value="Domain Services" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="715" y="140" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row1-2" value="90%" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;fontStyle=1;fontColor=#1B5E20;" vertex="1" parent="1">
          <mxGeometry x="835" y="140" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row1-3" value="Business logic, calculations" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="885" y="140" width="140" height="25" as="geometry" />
        </mxCell>

        <mxCell id="row2-1" value="Controllers" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="715" y="165" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row2-2" value="80%" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="835" y="165" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row2-3" value="Validation, mapping" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="885" y="165" width="140" height="25" as="geometry" />
        </mxCell>

        <mxCell id="row3-1" value="Event Handlers" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="715" y="190" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row3-2" value="85%" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="835" y="190" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row3-3" value="Event processing, states" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="885" y="190" width="140" height="25" as="geometry" />
        </mxCell>

        <mxCell id="row4-1" value="Repositories" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="715" y="215" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row4-2" value="70%" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="835" y="215" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row4-3" value="CRUD, queries" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="885" y="215" width="140" height="25" as="geometry" />
        </mxCell>

        <mxCell id="row5-1" value="External Clients" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="715" y="240" width="120" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row5-2" value="75%" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="835" y="240" width="50" height="25" as="geometry" />
        </mxCell>
        <mxCell id="row5-3" value="Error handling, retries" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#2E7D32;fontSize=9;" vertex="1" parent="1">
          <mxGeometry x="885" y="240" width="140" height="25" as="geometry" />
        </mxCell>

        <!-- Quality Metrics Section -->
        <mxCell id="metrics-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#E65100;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="295" width="340" height="145" as="geometry" />
        </mxCell>
        <mxCell id="metrics-title" value="Test Quality Metrics" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=14;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="710" y="300" width="200" height="25" as="geometry" />
        </mxCell>

        <mxCell id="metric1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="715" y="330" width="155" height="45" as="geometry" />
        </mxCell>
        <mxCell id="metric1-text" value="Line Coverage&#xa;≥ 80%" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="715" y="335" width="155" height="35" as="geometry" />
        </mxCell>

        <mxCell id="metric2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="880" y="330" width="155" height="45" as="geometry" />
        </mxCell>
        <mxCell id="metric2-text" value="Branch Coverage&#xa;All paths" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="880" y="335" width="155" height="35" as="geometry" />
        </mxCell>

        <mxCell id="metric3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="715" y="385" width="155" height="45" as="geometry" />
        </mxCell>
        <mxCell id="metric3-text" value="Mutation Score&#xa;≥ 70%" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="715" y="390" width="155" height="35" as="geometry" />
        </mxCell>

        <mxCell id="metric4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFE0B2;strokeColor=#F57C00;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="880" y="385" width="155" height="45" as="geometry" />
        </mxCell>
        <mxCell id="metric4-text" value="Execution Time&#xa;Unit &lt;10ms, Int &lt;5s" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;fontStyle=1;fontSize=11;fontColor=#E65100;" vertex="1" parent="1">
          <mxGeometry x="880" y="390" width="155" height="35" as="geometry" />
        </mxCell>

        <!-- Anti-Patterns Section -->
        <mxCell id="anti-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFEBEE;strokeColor=#C62828;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="460" width="500" height="180" as="geometry" />
        </mxCell>
        <mxCell id="anti-title" value="Anti-Patterns to Avoid" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=14;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="50" y="465" width="200" height="25" as="geometry" />
        </mxCell>

        <mxCell id="anti1" value="✗ Testing implementation details instead of behavior" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="60" y="495" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="anti2" value="✗ Overly broad tests that test multiple things" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="60" y="520" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="anti3" value="✗ Flaky tests with non-deterministic behavior" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="60" y="545" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="anti4" value="✗ Test data coupling between tests" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="60" y="570" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="anti5" value="✗ Ignoring edge cases in business logic" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="60" y="595" width="320" height="20" as="geometry" />
        </mxCell>
        <mxCell id="anti6" value="✗ Skipping negative test cases" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#C62828;" vertex="1" parent="1">
          <mxGeometry x="60" y="620" width="320" height="20" as="geometry" />
        </mxCell>

        <!-- Best Practices Section -->
        <mxCell id="best-container" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#2E7D32;shadow=1;" vertex="1" parent="1">
          <mxGeometry x="560" y="460" width="480" height="180" as="geometry" />
        </mxCell>
        <mxCell id="best-title" value="Best Practices" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontStyle=1;fontSize=14;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="570" y="465" width="200" height="25" as="geometry" />
        </mxCell>

        <mxCell id="best1" value="✓ Use parameterized tests for calculations" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="575" y="495" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best2" value="✓ Test all valid &amp; invalid state transitions" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="575" y="520" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best3" value="✓ Mock external dependencies consistently" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="575" y="545" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best4" value="✓ Use test factories for entity creation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="575" y="570" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best5" value="✓ Test error handling &amp; graceful degradation" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="575" y="595" width="280" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best6" value="✓ Isolate tests - no shared mutable state" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="575" y="620" width="280" height="20" as="geometry" />
        </mxCell>

        <mxCell id="best7" value="✓ Include boundary value tests" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="850" y="495" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best8" value="✓ Test concurrent scenarios" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="850" y="520" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best9" value="✓ Document test intent clearly" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="850" y="545" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="best10" value="✓ Keep tests fast &amp; reliable" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;fontSize=11;fontColor=#2E7D32;" vertex="1" parent="1">
          <mxGeometry x="850" y="570" width="180" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
